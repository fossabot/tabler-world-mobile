# this allows us to define variables in debug mode only

dev:
  STAGE: ${self:custom.stage}
  API_KEY_PLAIN: ${env:API_KEY_PLAIN}
  API_BATCH: ${env:API_BATCH}
  API_READ_BATCH: ${env:API_READ_BATCH}
  API_HOST: ${env:API_HOST}
  dataservice_arn:
    Fn::ImportValue: DataArn-${self:custom.stage}

test:
  STAGE: ${self:custom.stage}
  dataservice_arn:
    Fn::ImportValue: DataArn-${self:custom.stage}

prod:
  STAGE: ${self:custom.stage}
  dataservice_arn:
    Fn::ImportValue: DataArn-${self:custom.stage}

api:
  cache_table: ${self:custom.cache_table}
  PUBLISH_ENDPOINT: !Join
      - ''
      - - 'https://'
        - !Ref WebsocketsApi
        - '.execute-api.${self:provider.region}.amazonaws.com/${self:provider.stage}/'
  CONNECTIONS_TABLE: ${self:custom.connections_table}
  CHANNELS_TABLE: ${self:custom.channels_table}
  EVENTS_TABLE: ${self:custom.events_table}
